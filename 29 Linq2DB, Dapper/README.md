# Linq2DB, Dapper



## ADO.NET

ADO.NET по-прежнему остается актуальной и широко используемой технологией доступа к данным в приложениях .NET.
Он предоставляет набор классов для автономного доступа к источникам данных, таким как базы данных и XML-файлы.
ADO.NET является частью .NET Framework и .NET Core/.NET 5+ (теперь называемой просто .NET) и остается основополагающей технологией доступа к данным. Хотя появились новые технологии и платформы доступа к данным, такие как Entity Framework (EF) и Dapper, ADO.NET далеко не устарел.

* Производительность: ADO.NET предлагает детальный контроль над взаимодействием с базой данных, который может быть более эффективным для определенных сценариев с высокой производительностью по сравнению с инструментами ORM (объектно-реляционное сопоставление), такими как Entity Framework.
* Гибкость: он предоставляет возможность выполнять необработанные SQLзапросы, хранимые процедуры и обрабатывать сложные транзакции, предлагая больший контроль над операциями с базой данных.
* Легкость: для приложений, не требующих накладных расходов на ORM, ADO.NET может быть более простым и понятным выбором.
* Совместимость: ADO.NET совместим с широким спектром поставщиков данных, что делает его универсальным для доступа к различным типам баз данных.
* Зрелая и стабильная. Будучи зрелой технологией, ADO.NET имеет хорошо зарекомендовавший себя и стабильный API с обширной документацией и поддержкой сообщества.

1. SqlConnection Подключение к БД с использованием Connection String 
2. SqlCommand Команда (обертка над запросом) для отправки на сервер Позволяет также подставлять параметры в запрос
3. SqlTransaction Транзакция для выполнения нескольких запросов как единого целого
4. SqlDataReader Удобное средство для чтения множества строк из БД
5. DataSet Редко используемое (узкоспециализированное) средство для чтения таблицы БД и оперирования с ней оффлайн

ExecuteScalar — это метод в ADO.NET, который используется для выполнения запроса SQL и возврата первого столбца первой строки в наборе результатов, возвращаемом запросом.
Любые другие столбцы и строки игнорируются. Этот метод обычно используется, когда вы хотите получить одно значение из базы данных, например число, сумму или значение определенного столбца из одной записи.

![ima](https://github.com/IlyaGall/C-/blob/main/29%20Linq2DB%2C%20Dapper/IMG/1.JPG)

## ADO.NET async
* SqlConnection.OpenAsync()
* SqlCommand.ExecuteNonQueryAsync()
* SqlCommand.ExecuteReaderAsync()
* SqlCommand.ExecuteScalarAsync()
* SqlDataReader.ReadAsync()

## Преимущества и недостатки ADO.NET
* +- Использование чистого SQL
* + Полный контроль за отправляемыми запросами
* - Конвертация “C#-объект <-> SQL-представление” целиком на разработчике
* - IDE не поможет с переименованиями
* - Компилятор не поможет с контролем типов

## Когда использовать ADO.NET
Сложные транзакции, требующие детального контроля над соединением, командами и транзакциями.
Ситуации, когда разработчику необходимо использовать расширенные функции поставщика базы данных.
Обширных пользовательских манипуляций с данными и тонкой настройки
производительности на уровне взаимодействия с базой данных.
Минимальные внешние зависимости, поскольку ADO.NET является частью .NET Framework.


## ORM
ORM (Object-Relational Mapping): объектно-реляционное отображение — технология программирования, которая связывает базы данных с концепциями объектно-ориентированных языков программирования, создавая «виртуальную объектную базу данных».

ORM объединяет по своей сути различные парадигмы объектноориентированного программирования, где сущности представлены в виде классов и объектов, и реляционных баз данных, где данные хранятся в таблицах со строками и столбцами


## Какие модели маппит ORM

![ima](https://github.com/IlyaGall/C-/blob/main/29%20Linq2DB%2C%20Dapper/IMG/2.JPG)

## Какие модели маппит ORM

![ima](https://github.com/IlyaGall/C-/blob/main/29%20Linq2DB%2C%20Dapper/IMG/3.JPG)


## Преимущества и недостатки ORM

Преимущества
* Простота: ORM предоставляет простой интерфейс для работы с базой данных, который может быть понятным любому программисту. ORM скрывает сложности SQL-запросов, позволяя работать с данными на более высоком уровне абстракции.
* Переносимость: ORM может работать с различными СУДБ, что делает его более переносимым, чем SQL. Это позволяет разработчикам легко переносить свое приложение на другую СУБД без изменения кода.
* Сопровождаемость: ORM может значительно упростить сопровождение приложения, так как изменения в структуре базы данных могут быть внесены непосредственно в код ORM, а не в каждый SQL-запрос.
* Безопасность: ORM может предотвратить SQL-инъекции, поскольку ORM автоматически экранирует данные, которые передаются в базу данных.


Недостатки
* Сложность: ORM может быть сложным для понимания, особенно для новых разработчиков. ORM требует определенных знаний и опыта, чтобы использовать его эффективно.
* Производительность: ORM может быть менее эффективным, чем работа с SQL напрямую. ORM должен обрабатывать запросы и преобразовывать их в SQL, что может замедлить
производительность.
* Ограничения: ORM может иметь ограничения в отношении того, какие запросы могут быть выполнены. В случае, когда нужно выполнить сложный запрос или использовать специфичные функции базы данных, может потребоваться написание SQL-запроса напрямую.


## Dapper

Легкий микро-ORM, разработанный Stack Overflow, известный своей простотой и производительностью. Позволяет разработчикам выполнять необработанные SQL-запросы и сопоставлять результаты запросов с объектами с
минимальными издержками.


### Преимущества Dapper 

* быстрый
* позволяет использовать хранимые процедуры
* видно какой именно SQL запрос вы исполняете

### Сценарии использования Dapper

* приложения, критичные к производительности, которым требуется детальный контроль над взаимодействием с базой данных.
* когда требуются сложные запросы или оптимизация базы данных

## LINQ2DB

LINQ to DB — это быстрая библиотека доступа к базе данных LINQ, предлагающая простой, легкий, быстрый и типобезопасный уровень между POCO-объектами и базой данных. Архитектурно это на один шаг выше микро-ORM, таких как Dapper, вы работаете с выражениями LINQ. Запросы проверяются компилятором C#. Однако он не такой сложный, как Entity Framework. Отслеживание изменений не осуществляется, поэтому вам придется управлять этим самостоятельно, но есть и положительная сторона: вы получаете больше контроля и более быстрый доступ к своим данным. Другими словами, LINQ to DB — это типобезопасный SQL.

### Преимущества

1. Проверка во время компиляции
2. Оптимизированное выполнение запросов
3. Поддержка нескольких поставщиков баз данных: LinqToDB поддерживает различных поставщиков баз данных, включая SQL Server, MySQL, PostgreSQL, SQLite, Oracle и другие.
4. Поддержка транзакций: LinqToDB обеспечивает встроенную поддержку транзакций, позволяя разработчикам выполнять атомарные операции с базой данных и обеспечивать согласованность данных.
5. Богатый набор функций
6. Расширенные параметры сопоставления



### Когда использовать
1. Нужна высокая производительность
2. Сложные запросы
3. Независимость базы данных
4. запросы LINQ
5. Microservices Architecture







